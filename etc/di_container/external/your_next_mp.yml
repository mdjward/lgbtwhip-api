services:
    
    thelgbtwhip.api.external.client.your_next_mp:
        class: TheLgbtWhip\Api\External\Client\YourNextMp\YourNextMpClient
        arguments:
            httpClient: @thelgbtwhip.api.external.client.your_next_mp.http_client
            processor:  @thelgbtwhip.api.external.client.your_next_mp.processor

    thelgbtwhip.api.external.client.your_next_mp.cacheable:
        class: TheLgbtWhip\Api\External\Client\YourNextMp\YourNextMpCachingClient
        arguments:
            httpClient:             @thelgbtwhip.api.external.client.your_next_mp.http_client
            processor:              @thelgbtwhip.api.external.client.your_next_mp.processor
            objectManager:          @thelgbtwhip.api.orm.entity_manager
            candidateRepository:    @thelgbtwhip.api.orm.repository.candidate
            constituencyRepository: @thelgbtwhip.api.orm.repository.constituency
        tags:
            - { name: cacheable, type: filesystem }

    thelgbtwhip.api.external.client.your_next_mp.http_client:
        class: %thelgbtwhip.api.external.client.http_client.class%
        arguments:
            -
                base_url: %your_next_mp.base_url%

    thelgbtwhip.api.external.client.your_next_mp.processor:
        class: TheLgbtWhip\Api\External\Client\YourNextMp\YourNextMpPersistingProcessor
        arguments:
            candidateAndPartyManager:   @thelgbtwhip.api.orm.manager.candidate_and_party
            constituencyManager:        @thelgbtwhip.api.orm.manager.constituency
            targetElectionYear:         %target_election.year%
